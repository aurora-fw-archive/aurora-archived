#language
language: cpp

#compilers
compiler:
  - clang
  - gcc

os:
  - linux
  - osx

sudo: true

addons:
 apt:
   sources:
   - ubuntu-toolchain-r-test
   packages:
   - gcc-5
   - g++-5
   - automake
   - autotools-dev
   - build-essential
   - libgtk-3-dev

# Handle git submodules yourself
git:
    submodules: false
# Use sed to replace the SSH URL with the public URL, then initialize submodules
before_install:
  - sed -i 's/git@github.com:/https:\/\/github.com\//' .gitmodules
  - git submodule update --init --recursive
  - if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then sudo update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-5 90; fi
  - if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then sudo ln -sf /usr/bin/gcc-5 /usr/bin/gcc; fi
  - if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then sudo ln -sf /usr/bin/g++-5 /usr/bin/g++; fi
  - autoreconf -vfi
  - cd build && ../configure --prefix=/usr
  - cd build && make

install:
  - cd build && make install
